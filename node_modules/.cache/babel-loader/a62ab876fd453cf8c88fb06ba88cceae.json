{"ast":null,"code":"var _jsxFileName = \"/home/tenshi/Desktop/BUUka/src/Components/Wallet/FundCard.js\",\n    _s = $RefreshSig$();\n\nimport Styles from \"./css/styles.module.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FundCard = _ref => {\n  _s();\n\n  let {\n    handlefundCard,\n    handleCardForm\n  } = _ref;\n  const [cards, setCards] = useState({\n    activeObject: null,\n    objects: null\n  });\n  const initialValues = {\n    name: \"\",\n    cardNo: \"\",\n    expiryDate: \"\",\n    cvc: \"\",\n    cardtype: \"\",\n    amount: \"\"\n  };\n  const [formValues, setFormValues] = useState(initialValues);\n  const [errors, setErrors] = useState({}); //const [isSubmit, SetIsSubmit] = useState(false);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n    fetch(`http://localhost:8000/cardDetails`).then(res => {\n      return res.json();\n    }).then(data => {\n      if (isMounted) {\n        //console.log(data);\n        setCards({ ...cards,\n          objects: data\n        });\n      }\n    }).catch(error => {\n      console.log(error.message);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [cards]);\n\n  const handleActive = index => {\n    setCards({ ...cards,\n      activeObject: cards.objects[index]\n    });\n    setFormValues({ ...formValues,\n      name: cards.objects[index].name,\n      cardNo: cards.objects[index].cardNo,\n      expiryDate: cards.objects[index].expiryDate,\n      cvc: cards.objects[index].cvc,\n      cardtype: cards.objects[index].cardtype\n    });\n  };\n\n  const toggleClass = index => {\n    if (cards.objects[index] === cards.activeObject) {\n      return `${Styles.active}`;\n    } else {\n      return `${Styles.ping}`;\n    }\n  };\n\n  const validate = values => {\n    //Cardtype regex\n    const visaRegEx = new RegExp(\"^(?:4[0-9]{12}(?:[0-9]{3})?)$\");\n    const mastercardRegEx = new RegExp(\"^(?:5[1-5][0-9]{14})$\");\n    const amexpRegEx = new RegExp(\"^(?:3[47][0-9]{13})$\");\n    const discovRegEx = new RegExp(\"^(?:6(?:011|5[0-9][0-9])[0-9]{12})$\");\n    const errors = {};\n    const numberOnly = new RegExp(\"^([0-9]*)$\");\n\n    if (!values.amount) {\n      errors.amount = \"You have to set a specific amount\";\n    } else if (!numberOnly.test(values.amount)) {\n      errors.amount = \"Invalid Number\";\n    }\n\n    if (!values.name) {\n      errors.name = \"Name is empty\";\n    }\n\n    if (!values.cardNo) {\n      errors.cardNo = \"Card Number is empty\";\n    } else if (!(visaRegEx.test(values.cardNo) || mastercardRegEx.test(values.cardNo) || amexpRegEx.test(values.cardNo) || discovRegEx.test(values.cardNo))) {\n      errors.cardNo = \"Card Number is invalid\";\n    }\n\n    if (!values.expiryDate) {\n      errors.expiryDate = \"Expiry Date is empty\";\n    }\n\n    if (!values.cvc) {\n      errors.cvc = \"Cvc is empty\";\n    }\n\n    if (!values.cardtype) {\n      errors.cardtype = \"Card type is invalid\";\n    }\n\n    return errors;\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setErrors(validate(formValues)); //SetIsSubmit(true);\n    //endpoint we are posting to\n    // if(Object.keys(errors).length === 0 && isSubmit){\n    //     await fetch('http://localhost:8000/enpoint', {\n    //         method: 'POST',\n    //         headers: {\n    //         'Content-type': 'application/json',\n    //         },\n    //         body: JSON.stringify(formValues, undefined, 2),\n    //     })\n    // }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: Styles.fundAccount,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handlefundCard,\n        className: Styles.ball,\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: Styles.icon,\n          icon: faTimes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 88\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Fund Wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Choose a card to charge from\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), cards.objects && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"cards\",\n        className: Styles.No,\n        children: cards.objects.map((card, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleActive(index),\n          id: \"divs\",\n          className: toggleClass(index),\n          children: [card.cardtype === \"Visa\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"./visa.png\",\n            alt: \"Visa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 59\n          }, this) : \"\", card.cardtype === \"MasterCard\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"./ms.png\",\n            alt: \"MasterCard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 63\n          }, this) : \"\", /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: card.cardNo.slice(-4)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.settings,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCardForm,\n          type: \"button\",\n          children: \"Add a new card\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          children: \"Manage Cards\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.amount,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"amount\",\n          children: \"Amount to fund\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: formValues.amount,\n          onChange: handleChange,\n          name: \"amount\",\n          placeholder: \"Enter amount here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), errors.amount && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.amount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 36\n      }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 34\n      }, this), errors.cardNo && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.cardNo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 36\n      }, this), errors.expiryDate && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.expiryDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 40\n      }, this), errors.cvc && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.cvc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }, this), errors.cardtype && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: Styles.error,\n        children: errors.cardtype\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 38\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: Styles.bottom,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handlefundCard,\n          type: \"button\",\n          className: Styles.cancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: Styles.log,\n          children: \"Fund\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FundCard, \"mpbSXlR+0BVHy0Aser+tMO9Wgrw=\");\n\n_c = FundCard;\nexport default FundCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"FundCard\");","map":{"version":3,"sources":["/home/tenshi/Desktop/BUUka/src/Components/Wallet/FundCard.js"],"names":["Styles","React","useState","useEffect","FontAwesomeIcon","faTimes","FundCard","handlefundCard","handleCardForm","cards","setCards","activeObject","objects","initialValues","name","cardNo","expiryDate","cvc","cardtype","amount","formValues","setFormValues","errors","setErrors","handleChange","e","value","target","isMounted","fetch","then","res","json","data","catch","error","console","log","message","handleActive","index","toggleClass","active","ping","validate","values","visaRegEx","RegExp","mastercardRegEx","amexpRegEx","discovRegEx","numberOnly","test","handleSubmit","preventDefault","fundAccount","ball","icon","No","map","card","slice","settings","bottom","cancel"],"mappings":"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","sourcesContent":["import Styles from \"./css/styles.module.css\";\nimport React,{ useState,useEffect } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes} from '@fortawesome/free-solid-svg-icons'\nconst FundCard = ({handlefundCard, handleCardForm}) => {\n    const [cards, setCards] = useState({\n        activeObject: null,\n        objects: null,\n    });\n\n    const initialValues = {\n        name: \"\",\n        cardNo: \"\",\n        expiryDate: \"\",\n        cvc: \"\",\n        cardtype: \"\",\n        amount: \"\"\n    }\n\n    const [formValues, setFormValues] = useState(initialValues);\n    const [errors, setErrors] = useState({});\n    //const [isSubmit, SetIsSubmit] = useState(false);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormValues({ ...formValues, [name]: value});\n    };\n\n    useEffect(()=> {\n        let isMounted = true;\n        fetch(`http://localhost:8000/cardDetails`)\n        .then(res => {\n        return  res.json()\n        })\n        .then(data => {\n            if(isMounted){\n                //console.log(data);\n                setCards({...cards, objects : data});\n            }\n        })\n        .catch(error => {\n            console.log(error.message)\n        })\n        return () => { isMounted = false }; \n    }, [cards]);\n\n    \n\n    const handleActive = (index) =>{\n        setCards({...cards, activeObject: cards.objects[index]});\n        setFormValues({...formValues, \n            name: cards.objects[index].name,\n            cardNo: cards.objects[index].cardNo,\n            expiryDate: cards.objects[index].expiryDate,\n            cvc: cards.objects[index].cvc,\n            cardtype: cards.objects[index].cardtype\n        });\n    }\n\n    const toggleClass = (index) => {\n        if(cards.objects[index] === cards.activeObject){\n            return `${Styles.active}`;\n        }else {\n            return `${Styles.ping}`;\n        }\n    }\n\n    const validate = (values) => {\n        //Cardtype regex\n        const visaRegEx = new RegExp(\"^(?:4[0-9]{12}(?:[0-9]{3})?)$\");\n        const mastercardRegEx = new RegExp(\"^(?:5[1-5][0-9]{14})$\");\n        const amexpRegEx = new RegExp(\"^(?:3[47][0-9]{13})$\");\n        const discovRegEx = new RegExp(\"^(?:6(?:011|5[0-9][0-9])[0-9]{12})$\"); \n\n        const errors = {};\n        const numberOnly = new RegExp(\"^([0-9]*)$\");\n        if(!values.amount) {\n            errors.amount = \"You have to set a specific amount\";\n        }else if (!numberOnly.test(values.amount)){\n            errors.amount = \"Invalid Number\";\n        }if(!values.name){\n            errors.name = \"Name is empty\";\n        }\n        if(!values.cardNo){\n            errors.cardNo = \"Card Number is empty\";\n        }else if(!(visaRegEx.test(values.cardNo) || mastercardRegEx.test(values.cardNo) || amexpRegEx.test(values.cardNo) || discovRegEx.test(values.cardNo)) ){\n            errors.cardNo = \"Card Number is invalid\";\n        }if(!values.expiryDate){\n            errors.expiryDate = \"Expiry Date is empty\";\n        }if(!values.cvc){\n            errors.cvc = \"Cvc is empty\";\n        }if(!values.cardtype){\n            errors.cardtype = \"Card type is invalid\";\n        }\n        return errors;\n    }\n\n    const handleSubmit = async (e)  => {\n        e.preventDefault();\n        setErrors(validate(formValues));\n        //SetIsSubmit(true);\n        //endpoint we are posting to\n        // if(Object.keys(errors).length === 0 && isSubmit){\n        //     await fetch('http://localhost:8000/enpoint', {\n        //         method: 'POST',\n        //         headers: {\n        //         'Content-type': 'application/json',\n        //         },\n        //         body: JSON.stringify(formValues, undefined, 2),\n        //     })\n        // }\n    }\n\n\n    return (\n        <div className= {Styles.fundAccount}>\n            <form onSubmit={handleSubmit}>\n                 {/* <pre>{JSON.stringify(formValues, undefined, 2)}</pre> */}\n                <button type=\"button\" onClick={handlefundCard} className={Styles.ball}><FontAwesomeIcon  className={Styles.icon} icon={faTimes} /></button>\n                <h3>Fund Wallet</h3>\n                <p>Choose a card to charge from</p>\n                {cards.objects && <div id=\"cards\" className={Styles.No}>\n                    {cards.objects.map((card, index) => (\n                        <div onClick = {() => handleActive(index)} id=\"divs\" key = {index} className = {toggleClass(index)}>\n                            {card.cardtype === \"Visa\" ?   <img src=\"./visa.png\" alt=\"Visa\"/> : \"\"}\n                            {card.cardtype === \"MasterCard\" ? <img src=\"./ms.png\" alt=\"MasterCard\"/> : \"\" }\n                            <h2>{card.cardNo.slice(-4)}</h2>\n                        </div>\n                    ))}\n                </div>}\n                <div className={Styles.settings}>\n                    <button onClick={handleCardForm} type= \"button\">Add a new card</button>\n                    <button type= \"button\">Manage Cards</button>\n                </div>\n                <div className = {Styles.amount}>\n                    <label htmlFor=\"amount\">Amount to fund</label>\n                    <input  \n                        type=\"text\" \n                        value= {formValues.amount}\n                        onChange={handleChange} \n                        name=\"amount\" \n                        placeholder=\"Enter amount here\"\n                    />\n                    \n                </div>\n                { errors.amount && <p className={Styles.error}>{errors.amount}</p>}\n                { errors.name && <p className = {Styles.error}>{errors.name}</p>}\n                { errors.cardNo && <p className = {Styles.error}>{errors.cardNo}</p>}\n                { errors.expiryDate && <p className = {Styles.error}>{errors.expiryDate}</p>}\n                { errors.cvc && <p className = {Styles.error}>{errors.cvc}</p>}\n                { errors.cardtype && <p className = {Styles.error}>{errors.cardtype}</p>}\n                <div className={Styles.bottom}> \n                    <button onClick = {handlefundCard} type=\"button\" className={Styles.cancel}>Cancel</button>\n                    <button type= \"submit\" className={Styles.log}>Fund</button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default FundCard\n"]},"metadata":{},"sourceType":"module"}